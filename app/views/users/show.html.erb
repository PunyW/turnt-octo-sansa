<% if notice %>
    <div class="panel">
      <h5><%= notice %></h5>
    </div>
<% end %>

<h3>
  <strong>Username:</strong>
  <%= @user.username %>
</h3>

<p>
  Rated <%= pluralize(@user.ratings.count, 'beer') %> with an average of: <%= @user.average_rating %>
</p>
<% if @user.ratings.count > 0 %>
    <p>Favorite style <%= @user.favorite_style.name %> and favorite beer <%= @user.favorite_beer %></p>
    <p>Favorite brewery <%= @user.favorite_brewery.name %></p>
<% end %>

<% if @user.ratings.count.nonzero? %>
    <table>
      <thead>
      <tr>
        <th>Ratings</th>
      </tr>
      </thead>

      <tbody>
      <% @user.ratings.each do |rating| %>
          <tr>
            <td><%= rating %></td>
            <% if @user == current_user %>
                <td><%= link_to 'delete', rating, method: :delete, data: { confirm: 'Are you sure?' }, id: "rating#{rating.id}" %></td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

<% if @user.memberships.count.nonzero? %>
    <table>
      <thead>
      <tr>
        <th>Member of following beer clubs</th>
      </tr>
      </thead>

      <tbody>
      <% @user.beer_clubs.each do |club| %>
          <tr>
            <td><%= club %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

<%= link_to 'Edit', edit_user_path(@user) %> |
<% if @user == current_user %>
    <%= link_to 'Delete account', @user, method: :delete, data: { confirm: 'Are you sure?' } %> |
<% end %>
<%= link_to 'Back', users_path %>
